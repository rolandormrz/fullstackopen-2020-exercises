(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(43)},23:function(e,n,t){},24:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=(t(23),t(17)),i=t(16),l=t(2),s=(t(24),function(e){var n=e.filter,t=e.handleChange;return r.a.createElement("div",null,"Search by Name: ",r.a.createElement("input",{value:n,onChange:t}))}),m=function(e){var n=e.fields,t=e.setFields,a=e.handlers,c=a.handleChange,o=a.handleSubmit,u=n.newName,i=n.newNumber,l=t.setNewName,s=t.setNewNumber;return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:u,onChange:c(l),required:!0}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:i,onChange:c(s),required:!0})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.person,t=e.handleDelete;return r.a.createElement("li",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return t(n)}},"Delete"))},f={listStyleType:"none",paddingLeft:"10px"},h=function(e){var n=e.persons,t=e.handleDelete,a=n.map((function(e,n){return r.a.createElement(d,{key:n,person:e,handleDelete:t})}));return r.a.createElement("div",null,r.a.createElement("ul",{style:f},a))},b=t(4),p=t.n(b),v=function(e){return p.a.post("/api/persons",e).then((function(e){return e.data}))},E=function(){return p.a.get("/api/persons").then((function(e){return e.data}))},g=function(e){var n="".concat("/api/persons","/").concat(e);return p.a.delete(n)},w=function(e){return p.a.put("".concat("/api/persons","/").concat(e.id),e).then((function(e){return e.data}))},y=(t(42),function(e){var n=e.message,t=e.styling;return r.a.createElement("div",{className:t},r.a.createElement("p",null,n))}),N=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),d=Object(l.a)(o,2),f=d[0],b=d[1],p=Object(a.useState)(""),N=Object(l.a)(p,2),O=N[0],j=N[1],k=Object(a.useState)(""),C=Object(l.a)(k,2),S=C[0],x=C[1],D=Object(a.useState)({message:"",styling:""}),I=Object(l.a)(D,2),L=I[0],q=I[1];Object(a.useEffect)((function(){E().then((function(e){return c(e)}))}),[]);var F=function(e){return function(n){return e(n.target.value)}},J=function(e,n){q({message:e,styling:n}),setTimeout((function(){return q({message:"",styling:""})}),3e3)},T=""===S?t:t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(S.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),L.message&&r.a.createElement(y,{message:L.message,styling:L.styling}),r.a.createElement(s,{filter:S,handleChange:F(x)}),r.a.createElement("h2",null,"Add a new Entry"),r.a.createElement(m,{fields:{newName:f,newNumber:O},setFields:{setNewName:b,setNewNumber:j},handlers:{handleChange:F,handleSubmit:function(e){e.preventDefault();var n=t.findIndex((function(e){return e.name===f}));if(-1!==n){var a="".concat(f," already exists in the phonebook, replace the old number with the new one entered?");if(window.confirm(a)){var r=Object(u.a)({},t[n],{number:O});w(r).then((function(e){c(t.map((function(n){return n.id===e.id?e:n}))),J("".concat(e.name,"'s number has been updated in the phonebook"),"success")})).catch((function(){J("".concat(r.name," was removed in another instance. Cannot update ").concat(r.name,"'s number"),"error"),c(t.filter((function(e){return e.id!==r.id})))}))}}else{v({name:f,number:O}).then((function(e){c(t.concat(e)),J("".concat(e.name," has been added to the phonebook"),"success")})).catch((function(e){var n=e.response.data.error;J(n,"error")}))}b(""),j("")}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(h,{persons:T,handleDelete:function(e){g(e.id).then((function(){var n=t.findIndex((function(n){return e.id===n.id})),a=Object(i.a)(t),r=a.splice(n,1);c(a),J("".concat(r[0].name," has been removed from the phonebook"),"success")})).catch((function(){c(t.filter((function(n){return n.id!==e.id}))),J("".concat(e.name," has already been removed from the phonebook"),"error")}))}}))};o.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.b64955df.chunk.js.map